# Nixpacks configuration for Railway
# Required for WeasyPrint PDF generation

[phases.setup]
nixPkgs = [
  "python311",
  "gcc",
  "pango",
  "cairo",
  "gdk-pixbuf",
  "fontconfig",
  "freetype",
  "harfbuzz",
  "libffi",
  "zlib",
  "libjpeg",
  "libpng",
  "librsvg"
]

[phases.install]
cmds = ["pip install --upgrade pip", "pip install -r requirements.txt"]

[start]
cmd = "uvicorn app.main:app --host 0.0.0.0 --port ${PORT:-8000}"

[variables]
PYTHON_VERSION = "3.11"
